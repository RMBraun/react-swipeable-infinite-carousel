import e,{useRef as r,useState as t,useMemo as n,useCallback as o,useLayoutEffect as i,useEffect as l}from"react";function s(e,r){void 0===r&&(r={});var t=r.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var a="Carousel-module_container__j52CF",c="Carousel-module_slidesAndArrowsContainer__MvSNQ",u="Carousel-module_slideContainer__q7xxg";s(".Carousel-module_container__j52CF{align-items:center;display:flex;flex-direction:column;justify-content:center;max-width:100%;overflow:hidden;position:relative}.Carousel-module_slidesAndArrowsContainer__MvSNQ{display:flex;flex-direction:column;height:100%;justify-content:center;position:relative;width:100%}.Carousel-module_slideContainer__q7xxg{display:flex;flex-direction:row;transition:transform .5s;z-index:1}");const d=e=>e?.touches?.[0]?.clientX||e?.clientX||0,h=(e,r)=>e?.length&&r&&r>0?e.reduce(((t,{start:n},o)=>{const i=e[Math.min(o+r-1,e.length-1)].end-n;return i>t?i:t}),0):0,m=({isInfinite:s=!1,startIndex:m=0,isScrollable:f=!0,isDraggable:p=!0,hasDragMomentum:g=!0,dragMomentumSpeed:x=25,dragMomentumDecay:_=.98,minDisplayCount:w=0,displayCount:y=0,gridGap:A=10,arrows:b,arrowLeftProps:C={},arrowRightProps:v={},scrollSpeed:I=75,indexesPerRow:M=0,indexes:N,indexContainerProps:k={},indexProps:$={},style:P={},slideContainerStyle:D={},slideStyle:E={},children:T})=>{const F=r(),S=r(),H=r(!1),R=r(0),W=r(),j=e.Children.toArray(T)||[],[q,B]=t(s?j.length:0),L=n((()=>s&&q?[...j.slice(j.length-q,j.length),...j,...j.slice(0,q)]:j),[j.length,s,q]),X=L.length,G=n((()=>Array(X).fill(null).map(((r,t)=>G?.[t]||e.createRef()))),[X]),[O,Q]=t([]),Y=n((()=>s?O.slice(q,O.length-q):O),[O,O.length,s]),z=r(null),U=r(null),K=o(((e,r=O)=>{const t=r?.[e]?.start;return null!=t?-1*t:0}),[O]),[Z,J]=t({left:m+q,right:m+q}),V=n((()=>null!=Z?.left&&null!=Z?.right?Array(Z.right-Z.left+1).fill(Z.left).map(((e,r)=>(Z.left+r-q)%j.length)):[]),[Z?.left,Z?.right,q]),ee=r(Z),[re,te]=t(X),[ne,oe]=t(!1),[ie,le]=t(!0),se=r(!1),ae=r((()=>K(Z.left))),ce=r(0),ue=r(0),de=r(),he=n((()=>{const e=O?.[re]?.start;return null!=e?-1*e:0}),[O,X,re]),me=s||0!==Z.left,fe=s||Z.left<re,pe=o(((e,r=re)=>Math.max(0,Math.min(r,e))),[re]),ge=o(((e,r=O)=>{const t=-1*e,n=r.reduce(((e,{start:r,end:n,width:o},i)=>(e.left=t>=r?t>=r+o/2?i+1:i:e.left,e.right=null!=z.current?t+z.current.clientWidth>=n?i:e.right:X-1,e)),{left:0,right:0});return{left:pe(n.left),right:Math.max(Math.min(X-1,n.right),n.left)}}),[X,O,pe]),xe=o((({offset:e,index:r,newSlideAnchors:t=O,newClonesLength:n=q})=>{requestAnimationFrame((()=>{if(!U.current)return;let o=e;if(s&&n&&t.length){const r=t[t.length-n-1].end+A,i=t[n].start;e+r<0?o=e+r-i:e+i>0&&(o=e+i-r)}const i=null==r?ge(o):r;S.current&&cancelAnimationFrame(S.current),(ie||ne)&&(U.current.style.transitionDuration="0ms"),U.current.style.transform=`translate(${o}px)`,S.current=requestAnimationFrame((()=>{U.current.style.transitionDuration="500ms"})),ae.current=o,J(i)}))}),[A,ie,ne,O,O?.length,q,ge,J,ge]),_e=()=>{const e=((e=[],r,t)=>e.reduce(((n,o,i)=>{if(o?.current){const l=o.current.clientWidth-(t||i!==e.length-1?r:0),s=0===i?0:n[i-1].end+r,a=s+l;n.push({start:s,end:a,width:l})}return n}),[]))(G,A,s);if(e?.length){const r=U.current.clientWidth,t=(e=>{if(!s)return 0;const r=U.current.clientWidth,t=s?e.slice(q,e.length-q):e,n=t.reduce(((e,{width:t},n)=>(e.width=e.width+t,null==e.index&&e.width>r&&(e.index=n+1),e)),{width:0,index:null}).index,o=t.reduceRight(((e,{width:n},o)=>(e.width=e.width+n,null==e.index&&e.width>r&&(e.index=t.length-o),e)),{width:0,index:null}).index;return Math.max(n,o,1)})(e),n=e[e.length-1].end,o=pe(e.findIndex((({start:e})=>e+r>=n)),e.length-1),i=pe(ee.current.left+t,o),l=K(i,e),a=ge(l,e);B(t),J(a),Q(e),te(o),xe({offset:l,index:a})}};i((()=>{W.current&&W.current.disconnect(),W.current=new ResizeObserver(_e),W.current.observe(z.current),G.forEach((({current:e})=>W.current.observe(e))),_e()}),[X,q,w,y,A,s]),l((()=>{le(!1),s&&_e()}),[]);const we=o((e=>{if(!H.current){H.current=!0;let r=pe(Z.left+e);if(s){const t=r>=O.length-q?r-j.length-1:r<q-1?j.length+1+r:null;if(null!=t){U.current.style.transitionDuration="0ms";const n=-O[t].start;U.current.style.transform=`translate(${n}px)`,ae.current=n,r=pe(t+e)}}requestAnimationFrame((()=>{if(U.current.style.transitionDuration="500ms",r!==Z.left){const e=K(r),t=ge(e);U.current.addEventListener("transitionend",(()=>{H.current=!1}),{once:!0}),requestAnimationFrame((()=>{U.current.style.transform=`translate(${e}px)`})),ae.current=e,J(t)}else H.current=!1}))}}),[O,s,Z,X,q,ge,K,xe,pe,J]),ye=o((e=>{if(F.current&&cancelAnimationFrame(F.current),H.current||!p||ie||e.touches?.length>1)return;se.current=!1,oe(!0);const r=d(e);ce.current=r,ue.current=r}),[p,ie,oe]),Ae=o((e=>{if(e.stopPropagation(),H.current||se.current||!p||!ne||ie)return;ue.current=d(e);const r=ce.current-ue.current;ce.current=ue.current,R.current=r,0!==r&&xe({offset:ae.current-r})}),[p,ie,ne,xe]),be=o((e=>{if(F.current&&cancelAnimationFrame(F.current),!(H.current||!p||ie||e.touches?.length>0))if(g){se.current=!0;const e=r=>{R.current=r,F.current=requestAnimationFrame((()=>{const t=ae.current-r;Math.abs(r)<=1||t>=0||t<=he?(se.current=!1,oe(!1),R.current=0):(xe({offset:t}),e(r*_))}))};e(R.current<0?Math.max(R.current,-x):Math.min(R.current,x))}else oe(!1)}),[g,x,_,he,0,p,ie,oe,xe]),Ce=o((e=>{if(H.current||!f||ne)return;const r=0===e.deltaX&&Math.abs(e.deltaY)>0?-1*e.deltaY:e.deltaX,t=Math.sign(r);if(ae.current>=0&&-1===t||ae.current<=he&&1===t)return void le(!1);ie||le(!0);const n=ae.current-t*Math.min(I,Math.abs(r)),o=()=>{le(!1)};de.current&&clearTimeout(de.current),!s&&n>=0?xe({offset:0}):!s&&n<=he?xe({offset:he}):(xe({offset:n}),de.current=setTimeout(o,100))}),[s,f,I,ie,he,ae,ne,le,xe]);l((()=>{if(!(H.current||p&&ne||f&&ie)){F.current&&cancelAnimationFrame(F.current),de.current&&clearTimeout(de.current);const e=K(Z.left);xe({offset:e}),ce.current=0,ue.current=0}}),[ne,p,ie,f]);const ve=n((()=>(({displayCount:e,minDisplayCount:r,slideAnchors:t})=>{const n=h(t,r),o=h(t,e);return{minWidth:n>0?`${n}px`:"auto",width:o>0?`${o}px`:"100%"}})({minDisplayCount:w,displayCount:y,slideAnchors:O})),[O,O?.length,w,y]);return e.createElement("div",{className:a,style:{...ve,...P},ref:z},e.createElement("div",{className:c,onMouseLeave:be},b?e.createElement(b,{startIndex:Z.left-q,endIndex:Z.right-q,activeIndexes:V,isLeft:!0,isRight:!1,isHidden:ie||ne||!me,scrollBy:we,arrowProps:C}):null,e.createElement("div",{ref:U,className:u,style:D,onTouchStart:ye,onTouchMove:Ae,onTouchEnd:be,onTouchCancel:be,onMouseDown:ye,onMouseMove:Ae,onMouseUp:be,onWheel:Ce},L.map(((r,t)=>e.createElement("div",{style:{paddingRight:`${s||t!==L.length-1?A:0}px`,...E},ref:G[t],key:t},r)))),b?e.createElement(b,{startIndex:Z.left-q,endIndex:Z.right-q,activeIndexes:V,isLeft:!1,isRight:!0,isHidden:ie||ne||!fe,scrollBy:we,arrowProps:v}):null),N?e.createElement(N,{startIndex:Z.left-q,endIndex:Z.right-q,activeIndexes:V,indexesPerRow:M||j.length,slideAnchors:Y,scrollBy:we,indexContainerProps:k,indexProps:$}):null)};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},f.apply(this,arguments)}var p="Arrows-module_arrowIcon__kCgUr",g="Arrows-module_leftArrowIcon__G6aeu",x="Arrows-module_rightArrowIcon__Tkyu9",_="Arrows-module_arrow__AxDhI",w="Arrows-module_isArrowHidden__ulHQN",y="Arrows-module_rightArrow__995WH",A="Arrows-module_leftArrow__xHZIo";s(".Arrows-module_arrowIcon__kCgUr{background-color:transparent;border:6px solid #1b1b1b;height:24px;opacity:.5;transition:border-color .5s;width:24px}.Arrows-module_leftArrowIcon__G6aeu{border-right:none;border-top:none;transform:translateX(2.5px) rotate(45deg)}.Arrows-module_rightArrowIcon__Tkyu9{border-bottom:none;border-left:none;transform:translateX(-2.5px) rotate(45deg)}.Arrows-module_arrow__AxDhI{align-items:center;background-color:#929292a9;border:none;cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;margin:0;mix-blend-mode:luminosity;opacity:.7;padding:0;position:absolute;transition:opacity .5s,background-color .5s;width:48px;z-index:2}.Arrows-module_isArrowHidden__ulHQN{opacity:0;pointer-events:none}.Arrows-module_arrow__AxDhI:hover{opacity:1}.Arrows-module_arrow__AxDhI:focus-visible{opacity:1}.Arrows-module_arrow__AxDhI:active{background-color:#6b6b6ba9}.Arrows-module_rightArrow__995WH{right:0}.Arrows-module_leftArrow__xHZIo{left:0}");const b=({isLeft:r,isHidden:t,scrollBy:i,arrowProps:l,arrowIconProps:s})=>{const a=n((()=>`${_} ${r?A:y} ${t?w:""} ${l?.className||""}`),[l?.className,r,t]),c=o(((e,r)=>t=>{t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e(t),i(r)}),[l?.onClick,i,r]),u=n((()=>`${p} ${r?g:x} ${s?.className||""}`),[s?.className,r]);return e.createElement("button",f({},l,{className:a,onClick:c(l?.onClick,r?-1:1)}),e.createElement("span",f({},s,{className:u})))};var C="Indexes-module_indexContainer__vSTKG",v="Indexes-module_index__lF1Yb";s(".Indexes-module_indexContainer__vSTKG{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;margin:10px;width:100%}.Indexes-module_index__lF1Yb{background-color:transparent;border:solid rgba(50,50,50,.5);border-radius:2px;cursor:pointer;height:8px;margin:0;padding:0;transition:background-color .5s}");const I=({activeIndexes:t,startIndex:i,indexesPerRow:l,slideAnchors:s,scrollBy:a,indexContainerProps:c,indexProps:u})=>{const d=r(),h=n((()=>`calc((100% - ${5*(l-1)}px) / ${l})`),[l]),m=n((()=>`${C} ${c?.className||""}`),[c?.className]),p=n((()=>`${v} ${u?.className||""}`),[u?.className]),g=o(((e,r)=>t=>{"function"==typeof e&&e(t),a(r)}),[a]);return e.createElement("div",f({},c,{ref:d,className:m,style:{gap:"5px",...c?.style}}),s?.map(((r,n)=>e.createElement("button",f({key:n},u,{className:p,style:{backgroundColor:t.includes(n)?"black":"transparent",width:h,borderWidth:"2px",...u?.style},onClick:g(u?.onClick,n-i)})))))};export{b as Arrows,m as Carousel,I as Indexes};
//# sourceMappingURL=index.es.js.map
