import e,{useState as r,useRef as t,useMemo as n,useCallback as o,useLayoutEffect as l,useEffect as i}from"react";function s(e,r){void 0===r&&(r={});var t=r.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var a="Carousel-module_container__j52CF",c="Carousel-module_slidesAndArrowsContainer__MvSNQ",u="Carousel-module_slideContainer__q7xxg";s(".Carousel-module_container__j52CF{align-items:center;display:flex;flex-direction:column;justify-content:center;max-width:100%;overflow:hidden;position:relative}.Carousel-module_slidesAndArrowsContainer__MvSNQ{display:flex;flex-direction:column;height:100%;justify-content:center;position:relative;width:100%}.Carousel-module_slideContainer__q7xxg{display:flex;flex-direction:row;transition:transform .5s;z-index:1}");const d=e=>e?.touches?.[0]?.clientX||e?.clientX||0,h=(e,r)=>e?.length&&r&&r>0?e.reduce(((t,{start:n},o)=>{const l=e[Math.min(o+r-1,e.length-1)].end-n;return l>t?l:t}),0):0,m=({isInfinite:s=!1,startIndex:m=0,isScrollable:f=!0,isDraggable:g=!0,hasDragMomentum:p=!0,dragMomentumSpeed:x=25,dragMomentumDecay:_=.98,minDisplayCount:w=0,displayCount:y=0,gridGap:A=10,arrows:b,arrowLeftProps:C={},arrowRightProps:v={},scrollSpeed:I=75,scrollCount:M=1,shouldScrollByDisplayCount:N=!1,indexesPerRow:k=0,indexes:$,indexContainerProps:D={},indexProps:P={},style:E={},slideContainerStyle:S={},slideStyle:T={},children:F})=>{const[H,R]=r(!1),W=t(),j=t(),B=t(!1),L=t(0),q=t(),G=e.Children.toArray(F)||[],[O,X]=r(s?G.length:0),Q=n((()=>s&&O?[...G.slice(G.length-O,G.length),...G,...G.slice(0,O)]:G),[F,G.length,s,O]),z=Q.length,U=n((()=>Array(z).fill(null).map(((r,t)=>U?.[t]||e.createRef()))),[z]),[K,Y]=r([]),Z=n((()=>s?K.slice(O,K.length-O):K),[K,K.length,s]),J=t(null),V=t(null),ee=o(((e,r=K)=>{const t=r?.[e]?.start;return null!=t?-1*t:0}),[K]),[re,te]=r({left:m+O,right:m+O}),ne=n((()=>null!=re?.left&&null!=re?.right?Array(re.right-re.left+1).fill(re.left).map(((e,r)=>(re.left+r-O)%G.length)):[]),[re?.left,re?.right,O]),oe=t(re),[le,ie]=r(z),[se,ae]=r(!1),[ce,ue]=r(!0),de=t(!1),he=t((()=>ee(re.left))),me=t(0),fe=t(0),ge=t(),pe=n((()=>{const e=K?.[le]?.start;return null!=e?-1*e:0}),[K,z,le]),xe=s||0!==re.left,_e=s||re.left<le,we=o(((e,r=le)=>Math.max(0,Math.min(r,e))),[le]),ye=o(((e,r=K)=>{const t=-1*e,n=r.reduce(((e,{start:r,end:n,width:o},l)=>(e.left=t>=r?t>=r+o/2?l+1:l:e.left,e.right=null!=J.current?t+J.current.clientWidth>=n?l:e.right:z-1,e)),{left:0,right:0});return{left:we(n.left),right:Math.max(Math.min(z-1,n.right),n.left)}}),[z,K,we]),Ae=o((({offset:e,index:r,newSlideAnchors:t=K,newClonesLength:n=O})=>{requestAnimationFrame((()=>{if(!V.current)return;let o=e;if(s&&n&&t.length){const r=t[t.length-n-1].end+A,l=t[n].start;e+r<0?o=e+r-l:e+l>0&&(o=e+l-r)}const l=null==r?ye(o):r;j.current&&cancelAnimationFrame(j.current),(ce||se)&&(V.current.style.transitionDuration="0ms"),V.current.style.transform=`translate(${o}px)`,j.current=requestAnimationFrame((()=>{V.current.style.transitionDuration="500ms"})),he.current=o,te(l)}))}),[A,ce,se,K,K?.length,O,ye,te,ye]),be=()=>{const e=((e=[],r,t)=>e.reduce(((n,o,l)=>{if(o?.current){const i=o.current.clientWidth-(t||l!==e.length-1?r:0),s=0===l?0:n[l-1].end+r,a=s+i;n.push({start:s,end:a,width:i})}return n}),[]))(U,A,s);if(e?.length){const r=V.current.clientWidth,t=(e=>{if(!s)return 0;const r=V.current.clientWidth,t=s?e.slice(O,e.length-O):e,n=t.reduce(((e,{width:t},n)=>(e.width=e.width+t,null==e.index&&e.width>r&&(e.index=n+1),e)),{width:0,index:null}).index,o=t.reduceRight(((e,{width:n},o)=>(e.width=e.width+n,null==e.index&&e.width>r&&(e.index=t.length-o),e)),{width:0,index:null}).index;return Math.max(n,o,1)})(e),n=e[e.length-1].end,o=we(e.findIndex((({start:e})=>e+r>=n)),e.length-1),l=we(oe.current.left+t,o),i=ee(l,e),a=ye(i,e);X(t),te(a),Y(e),ie(o),Ae({offset:i,index:a})}};l((()=>{q.current&&q.current.disconnect(),q.current=new ResizeObserver(be),q.current.observe(J.current),U.forEach((({current:e})=>q.current.observe(e))),be()}),[z,O,w,y,A,s]),i((()=>{ue(!1),s&&be()}),[]);const Ce=o((e=>{if(!B.current){B.current=!0;let r=we(re.left+e);if(s){const t=r>=K.length-O?r-G.length-1:r<O-1?G.length+1+r:null;if(null!=t){V.current.style.transitionDuration="0ms";const n=-K[t].start;V.current.style.transform=`translate(${n}px)`,he.current=n,r=we(t+e)}}requestAnimationFrame((()=>{if(V.current.style.transitionDuration="500ms",r!==re.left){const e=ee(r),t=ye(e);V.current.addEventListener("transitionend",(()=>{B.current=!1}),{once:!0}),requestAnimationFrame((()=>{V.current.style.transform=`translate(${e}px)`})),he.current=e,te(t)}else B.current=!1}))}}),[K,s,re,z,O,ye,ee,Ae,we,te]),ve=o((e=>{if(W.current&&cancelAnimationFrame(W.current),B.current||!g||ce||e.touches?.length>1)return;de.current=!1,ae(!0);const r=d(e);me.current=r,fe.current=r}),[g,ce,ae]),Ie=o((e=>{if(e.stopPropagation(),B.current||de.current||!g||!se||ce)return;fe.current=d(e);const r=me.current-fe.current;me.current=fe.current,L.current=r,0!==r&&Ae({offset:he.current-r})}),[g,ce,se,Ae]),Me=o((e=>{if(W.current&&cancelAnimationFrame(W.current),!(B.current||!g||ce||e.touches?.length>0))if(p){de.current=!0;const e=r=>{L.current=r,W.current=requestAnimationFrame((()=>{const t=he.current-r;Math.abs(r)<=1||t>=0||t<=pe?(de.current=!1,ae(!1),L.current=0):(Ae({offset:t}),e(r*_))}))};e(L.current<0?Math.max(L.current,-x):Math.min(L.current,x))}else ae(!1)}),[p,x,_,pe,0,g,ce,ae,Ae]),Ne=o((e=>{if(B.current||!f||se)return;const r=e.deltaX,t=Math.sign(r);if(he.current>=0&&-1===t||he.current<=pe&&1===t)return void ue(!1);ce||ue(!0);const n=he.current-t*Math.min(I,Math.abs(r)),o=()=>{ue(!1)};ge.current&&clearTimeout(ge.current),!s&&n>=0?Ae({offset:0}):!s&&n<=pe?Ae({offset:pe}):(Ae({offset:n}),ge.current=setTimeout(o,100))}),[s,f,I,ce,pe,he,se,ue,Ae]),ke=o((()=>{R(!0)}),[R]),$e=o((()=>{R(!1)}),[R]);i((()=>{if(!(B.current||g&&se||f&&ce)){W.current&&cancelAnimationFrame(W.current),ge.current&&clearTimeout(ge.current);const e=ee(re.left);Ae({offset:e}),me.current=0,fe.current=0}}),[se,g,ce,f]);const De=n((()=>(({displayCount:e,minDisplayCount:r,slideAnchors:t})=>{const n=h(t,r),o=h(t,e);return{minWidth:n>0?`${n}px`:"auto",width:o>0?`${o}px`:"100%"}})({minDisplayCount:w,displayCount:y,slideAnchors:K})),[K,K?.length,w,y]),Pe=n((()=>(!s&&N?ne.length:M)||1),[s,N,ne,ne.length,M]);return e.createElement("div",{className:a,style:{...De,...E},ref:J,onMouseEnter:ke,onMouseLeave:$e},e.createElement("div",{className:c,onMouseLeave:Me},b?e.createElement(b,{startIndex:re.left-O,endIndex:re.right-O,activeIndexes:ne,isLeft:!0,isRight:!1,isHidden:!H||ce||se||!xe,scrollBy:Ce,arrowProps:C,scrollCount:Pe}):null,e.createElement("div",{ref:V,className:u,style:S,onTouchStart:ve,onTouchMove:Ie,onTouchEnd:Me,onTouchCancel:Me,onMouseDown:ve,onMouseMove:Ie,onMouseUp:Me,onWheel:Ne},Q.map(((r,t)=>e.createElement("div",{style:{paddingRight:`${s||t!==Q.length-1?A:0}px`,...T},ref:U[t],key:t},r)))),b?e.createElement(b,{startIndex:re.left-O,endIndex:re.right-O,activeIndexes:ne,isLeft:!1,isRight:!0,isHidden:!H||ce||se||!_e,scrollBy:Ce,arrowProps:v,scrollCount:Pe}):null),$?e.createElement($,{startIndex:re.left-O,endIndex:re.right-O,activeIndexes:ne,indexesPerRow:k||G.length,slideAnchors:Z,scrollBy:Ce,indexContainerProps:D,indexProps:P}):null)};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},f.apply(this,arguments)}var g="Arrows-module_arrowIcon__kCgUr",p="Arrows-module_leftArrowIcon__G6aeu",x="Arrows-module_rightArrowIcon__Tkyu9",_="Arrows-module_arrow__AxDhI",w="Arrows-module_isArrowHidden__ulHQN",y="Arrows-module_rightArrow__995WH",A="Arrows-module_leftArrow__xHZIo";s(".Arrows-module_arrowIcon__kCgUr{background-color:transparent;border:6px solid #1b1b1b;height:24px;opacity:.5;transition:border-color .5s;width:24px}.Arrows-module_leftArrowIcon__G6aeu{border-right:none;border-top:none;transform:translateX(2.5px) rotate(45deg)}.Arrows-module_rightArrowIcon__Tkyu9{border-bottom:none;border-left:none;transform:translateX(-2.5px) rotate(45deg)}.Arrows-module_arrow__AxDhI{align-items:center;background-color:#929292a9;border:none;cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;margin:0;mix-blend-mode:luminosity;opacity:.7;padding:0;position:absolute;transition:opacity .5s,background-color .5s;width:48px;z-index:2}.Arrows-module_isArrowHidden__ulHQN{opacity:0;pointer-events:none}.Arrows-module_arrow__AxDhI:hover{opacity:1}.Arrows-module_arrow__AxDhI:focus-visible{opacity:1}.Arrows-module_arrow__AxDhI:active{background-color:#6b6b6ba9}.Arrows-module_rightArrow__995WH{right:0}.Arrows-module_leftArrow__xHZIo{left:0}");const b=({isLeft:r,isHidden:t,scrollBy:l,scrollCount:i,arrowProps:s,arrowIconProps:a})=>{const c=n((()=>`${_} ${r?A:y} ${t?w:""} ${s?.className||""}`),[s?.className,r,t]),u=o(((e,r)=>t=>{t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e(t),l(r)}),[s?.onClick,l,r]),d=n((()=>`${g} ${r?p:x} ${a?.className||""}`),[a?.className,r]);return e.createElement("button",f({},s,{className:c,onClick:u(s?.onClick,r?-i:i)}),e.createElement("span",f({},a,{className:d})))};var C="Indexes-module_indexContainer__vSTKG",v="Indexes-module_index__lF1Yb";s(".Indexes-module_indexContainer__vSTKG{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;margin:10px;width:100%}.Indexes-module_index__lF1Yb{background-color:transparent;border:solid rgba(50,50,50,.5);border-radius:2px;cursor:pointer;height:8px;margin:0;padding:0;transition:background-color .5s}");const I=({activeIndexes:r,startIndex:l,indexesPerRow:i,slideAnchors:s,scrollBy:a,indexContainerProps:c,indexProps:u})=>{const d=t(),h=n((()=>`calc((100% - ${5*(i-1)}px) / ${i})`),[i]),m=n((()=>`${C} ${c?.className||""}`),[c?.className]),g=n((()=>`${v} ${u?.className||""}`),[u?.className]),p=o(((e,r)=>t=>{"function"==typeof e&&e(t),a(r)}),[a]);return e.createElement("div",f({},c,{ref:d,className:m,style:{gap:"5px",...c?.style}}),s?.map(((t,n)=>e.createElement("button",f({key:n},u,{className:g,style:{backgroundColor:r.includes(n)?"black":"transparent",width:h,borderWidth:"2px",...u?.style},onClick:p(u?.onClick,n-l)})))))};export{b as Arrows,m as Carousel,I as Indexes};
//# sourceMappingURL=index.es.js.map
