import e,{useRef as r,useMemo as t,useState as n,useCallback as o,useLayoutEffect as i,useEffect as s}from"react";var a="Carousel-module_container__j52CF",l="Carousel-module_slideContainer__q7xxg",u="Carousel-module_arrowIcon__wMmqr",c="Carousel-module_leftArrowIcon__daMSf",d="Carousel-module_rightArrowIcon__dMi-3",m="Carousel-module_arrow__qfBj1",h="Carousel-module_isArrowHidden__9yP-w",_="Carousel-module_rightArrow__8sZy6",p="Carousel-module_leftArrow__yzgQL";!function(e,r){void 0===r&&(r={});var t=r.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".Carousel-module_container__j52CF{align-items:center;display:flex;flex-direction:row;max-width:100%;overflow:hidden;position:relative}.Carousel-module_slideContainer__q7xxg{display:flex;flex-direction:row;z-index:1}.Carousel-module_arrowIcon__wMmqr{background-color:transparent;border:6px solid #1b1b1b;border-radius:5px;height:35%;opacity:.5;transition:border-color .5s;width:35%}.Carousel-module_leftArrowIcon__daMSf{border-right:none;border-top:none;transform:translateX(2.5px) rotate(45deg)}.Carousel-module_rightArrowIcon__dMi-3{border-bottom:none;border-left:none;transform:translateX(-2.5px) rotate(45deg)}.Carousel-module_arrow__qfBj1{align-items:center;background:transparent;border:none;border-radius:50%;cursor:pointer;display:flex;flex-direction:column;height:48px;justify-content:center;margin:0;padding:0;position:absolute;transition:opacity .5s,background-color .5s;width:48px;z-index:2}.Carousel-module_isArrowHidden__9yP-w{opacity:0;pointer-events:none}.Carousel-module_arrow__qfBj1:hover{background-color:#efefefa9;opacity:1}.Carousel-module_arrow__qfBj1:active{background-color:#929292a9;opacity:1}.Carousel-module_rightArrow__8sZy6{right:10px}.Carousel-module_leftArrow__yzgQL{left:10px}");const f=e=>e?.touches?.[0]?.clientX||e?.clientX||0,g=(e,r)=>e?.length&&r&&r>0?e.reduce(((t,{start:n},o)=>{const i=e[Math.min(o+r-1,e.length-1)].end-n;return i>t?i:t}),0):0,C=({displayCount:e,minDisplayCount:r,slideAnchors:t})=>{const n=g(t,r),o=g(t,e);return{minWidth:n?`${n}px`:"auto",width:o?`${o}px`:"100%"}},w=({isLeft:r,isHidden:t,style:n,onClick:o})=>e.createElement("button",{className:`${m} ${r?p:_} ${t?h:""}`,style:n,onClick:o},e.createElement("span",{className:`${u} ${r?c:d}`})),y=({startIndex:u=0,minDisplayCount:c=0,displayCount:d=0,gridGap:m=10,showArrows:h=!0,renderArrows:_=w,style:p={},slideContainerStyle:g={},slideStyle:y={},children:x})=>{const b=r(),v=e.Children.toArray(x)||[],M=v.length,A=t((()=>Array(M).fill(null).map(((r,t)=>A?.[t]||e.createRef()))),[M]),[E,k]=n([]),q=r(null),S=r(null),T=o(((e,r=E)=>{const t=r?.[e]?.start;return null!=t?-1*t:0}),[E]),$=r(u),[I,L]=n(u),j=o((e=>{L(e),$.current=e}),[L]),[z,D]=n(M),[B,N]=n(!1),[X,H]=n(!1),W=r(T(I)),P=r(0),R=r(0),F=r(),G=t((()=>{const e=E?.[z]?.start;return null!=e?-1*e:0}),[E,M,z]),O=0!==I,Q=null==W.current||null==q.current||null==E?.[M-1]||-1*W.current+q.current.clientWidth<E?.[M-1].end,Y=o(((e,r=z)=>Math.max(0,Math.min(r,e))),[z]),Z=o((e=>{W.current=e,requestAnimationFrame((()=>{S.current&&(S.current.style.transform=`translate(${e}px)`)}))}),[]),U=()=>{const e=((e=[],r=0)=>e.reduce(((e,t,n)=>{if(t?.current){const o=t.current.clientWidth,i=0===n?0:e[n-1].end+r,s=i+o;e.push({start:i,end:s,width:o})}return e}),[]))(A,m),r=q.current.clientWidth,t=e[e.length-1].end,n=Y(e.findIndex((({start:e})=>e+r>=t)),e.length-1),o=Y($.current,n),i=T(o,e);j(o),k(e),D(n),Z(i)},J=o((e=>{const r=Y(e);return{index:r,translateOffset:T(r)}}),[M,T,Y]);i((()=>{b.current&&b.current.disconnect(),b.current=new ResizeObserver(U),A.forEach((({current:e})=>b.current.observe(e))),U()}),[M,c,d,m]),s((()=>(window.addEventListener("resize",U),()=>{b.current&&b.current.disconnect(),window.removeEventListener("resize",U)})),[]);const K=o((e=>r=>{r.preventDefault(),r.stopPropagation();const t=Y(I+e);j(t),Z(T(t))}),[I,M,T,j,Z,Y]),V=o((e=>{if(X||e.touches?.length>1)return;N(!0);const r=f(e);P.current=r,R.current=r}),[X,N]),ee=o((e=>{if(e.stopPropagation(),!B||X)return;R.current=f(e);const r=P.current-R.current;P.current=R.current,0!==r&&Z(W.current-r)}),[X,B,I,Z]),re=o((e=>{if(X||e.touches?.length>0)return;const r=-1*W.current,t=E.reduce(((e,{start:t,width:n},o)=>r>=t?r>=t+n/2?o+1:o:e),0),n=Y(t);j(n),Z(T(n)),P.current=0,R.current=0,N(!1)}),[X,E,Z,T,j,Y,N]),te=o((e=>{if(B)return;const r=0===e.deltaX&&Math.abs(e.deltaY)>0,t=r?-1*e.deltaY:e.deltaX,n=Math.sign(t);if(W.current>=0&&-1===n||W.current<=G&&1===n)return;X||r||H(!0);const o=W.current-n*Math.min(75,Math.abs(t)),i=()=>{H(!1);const e=-1*o,r=E.reduce(((r,{start:t,width:n},o)=>e>=t?e>=t+n/2?o+1:o:r),0),t=Y(r);j(t),Z(T(t))};F.current&&clearTimeout(F.current),o>=0?(Z(0),i()):o<=G?(Z(G),i()):(Z(o),F.current=setTimeout(i,100))}),[E,m,X,G,W,B,H,j,Z,J]),ne=t((()=>(({gridGap:e,isScrolling:r,isDragging:t})=>({gap:`${e}px`,transition:"transform "+(r||t?"0ms":"500ms")}))({gridGap:m,isScrolling:X,isDragging:B})),[m,X,B]);return e.createElement("div",{className:a,style:{...C({minDisplayCount:c,displayCount:d,slideAnchors:E}),...p},ref:q},h&&e.createElement(_,{isLeft:!0,isRight:!1,isHidden:X||B||!O,onClick:O?K(-1):void 0}),e.createElement("div",{ref:S,className:l,style:{...ne,...g},onTouchStart:V,onTouchMove:ee,onTouchEnd:re,onTouchCancel:re,onMouseDown:V,onMouseMove:ee,onMouseUp:re,onMouseLeave:re,onWheel:te},v.map(((r,t)=>e.createElement("div",{style:y,ref:A[t],key:t},r)))),h&&e.createElement(_,{isLeft:!1,isRight:!0,isHidden:X||B||!Q,onClick:Q?K(1):void 0}))};export{y as Carousel};
//# sourceMappingURL=index.es.js.map
