import e,{useMemo as t,useRef as n,useState as r,useCallback as o,useLayoutEffect as i,useEffect as s}from"react";const a=(e,t,n)=>`calc(${e}px * ${t} + (${t-1} * ${n}px))`,l=({slideWidth:e,displayCount:t,minDisplayCount:n,gridGap:r})=>({position:"relative",minWidth:`${n&&n>0?a(e,n,r):"auto"}`,width:`${t&&t>0?a(e,t,r):"100%"}`,maxWidth:"100%",overflow:"hidden",display:"flex",flexDirection:"row",alignItems:"center"}),c=({gridGap:e,isScrolling:t,isDragging:n})=>({display:"flex",flexDirection:"row",gap:`${e}px`,zIndex:1,transition:"transform "+(t||n?"0ms":"500ms")}),d={width:"35%",height:"35%",border:"6px solid #1b1b1b",borderRadius:"5px",transition:"border-color 500ms"},u=({size:e})=>({position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"0px",margin:"0px",border:"none",width:`${e}px`,height:`${e}px`,borderRadius:"50%",backgroundColor:"transparent",transition:"opacity 500ms, background-color 500ms",zIndex:"2",cursor:"pointer"}),p={...d,borderRight:"none",borderTop:"none",transform:"translateX(2.5px) rotate(45deg)"},m=e=>({...u(e),right:"10px"}),h={...d,borderLeft:"none",borderBottom:"none",transform:"translateX(-2.5px) rotate(45deg)"},f=({isLeft:t,isHidden:n,style:o,onClick:i})=>{const[s,a]=r(!1),[l,c]=r(!1);return e.createElement("button",{style:{...o,opacity:n?"0":s?"1":"0.5",pointerEvents:""+(n?"none":"auto"),backgroundColor:l?"#929292a9":s?"#efefefa9":"transparent"},onClick:i,onMouseEnter:()=>a(!0),onMouseLeave:()=>{a(!1),c(!1)},onMouseDown:()=>c(!0),onMouseUp:()=>c(!1)},e.createElement("span",{style:t?p:h}))},g=e=>e?.touches?.[0]?.clientX||e?.clientX||0,x=({startIndex:a=0,minDisplayCount:d=0,displayCount:p=0,gridGap:h=10,slideWidth:x,showArrows:y=!0,renderArrows:M=f,style:b={},slideContainerStyle:v={},slideStyle:C={},children:w})=>{const E=t((()=>e.Children.toArray(w)||[]),[w]),D=t((()=>E.length),[E]),$=t((()=>Array(D).fill(e.createRef())),[D]),k=n(null),L=n(null),[z,T]=r(Math.max(p,1)),W=o(((e,t=0)=>-1*e*(x+h)-t),[x,h]),[R,S]=r(a),[X,A]=r(!1),[G,I]=r(!1),H=n(W(R,0)),O=o((e=>{H.current=e,requestAnimationFrame((()=>{L.current&&(L.current.style.transform=`translate(${e}px)`)}))}),[]),P=n(0),U=n(0),Y=n(),j=n({timestamp:0}),q=o((()=>{const e=k.current?.clientWidth||D*x,t=Math.max(Math.min(Math.floor(e/x),p),1),n=W(R<0?0:R>D-t?D-t:R,0);O(n),T(t)}),[D,x,R,p,W,O,T]),B=o((e=>{const t=e<0?0:e>D-z?D-z:e;return{index:t,translateOffset:W(t,0)}}),[D,z,W]);i((()=>{q()}),[D,d,p,h,x]),s((()=>(window.addEventListener("resize",q),()=>{window.removeEventListener("resize",q)})),[q]);const F=t((()=>-1*(D-z)*(x+h)),[D,z,x,h]),J=0!==R,K=R+z<D,N=o((e=>t=>{t.preventDefault(),t.stopPropagation();const n=R+e,r=n<0?0:n>D-z?D-z-1:n;S(r),O(W(r,0))}),[R,D,z,W,S,O]),Q=o((e=>{if(G||e.touches?.length>1)return;A(!0);const t=g(e);P.current=t,U.current=t}),[G,A]),V=o((e=>{if(e.stopPropagation(),!X||G)return;U.current=g(e);const t=P.current-U.current;if(0!==t){const e=W(R,t);O(e)}}),[G,X,R,O,W]),Z=o((e=>{if(G||e.touches?.length>0)return;const t=P.current-U.current;if(0!==t){const e=Math.round(R+t/(x+h)),n=B(e);S(n.index),O(n.translateOffset),P.current=0,U.current=0}A(!1)}),[G,R,x,h,S,O,B]),_=o((e=>{if(X)return;const t=0===e.deltaX&&Math.abs(e.deltaY)>0,n=t?-1*e.deltaY:e.deltaX,r=Math.sign(n);if(j.current.timestamp=e.timeStamp,H.current>=0&&-1===r||H.current<=F&&1===r)return;G||t||I(!0);const o=H.current-r*Math.min(x,Math.abs(n)),i=()=>{I(!1);const e=Math.round(Math.abs(o)/(x+h)),t=B(e);S(t.index),O(t.translateOffset)};Y.current&&clearTimeout(Y.current),o>=0?(O(0),i()):o<=F?(O(F),i()):(O(o),Y.current=setTimeout(i,100))}),[h,G,F,H,x,X,I,S,O,B]);return e.createElement("div",{style:{...l({minDisplayCount:d,displayCount:p,slideWidth:x,gridGap:h}),...b},ref:k},y&&e.createElement(M,{isLeft:!0,isRight:!1,style:(ee={size:48},{...u(ee),left:"10px"}),isHidden:G||X||!J,onClick:J?N(-1):void 0}),e.createElement("div",{ref:L,style:{...c({gridGap:h,isScrolling:G,isDragging:X}),...v},onTouchStart:Q,onTouchMove:V,onTouchEnd:Z,onTouchCancel:Z,onMouseDown:Q,onMouseMove:V,onMouseUp:Z,onMouseLeave:Z,onWheel:_},E.map(((t,n)=>e.createElement("div",{style:C,ref:$[n],key:n},t)))),y&&e.createElement(M,{isLeft:!1,isRight:!0,style:m({size:48}),isHidden:G||X||!K,onClick:K?N(1):void 0}));var ee};export{x as Carousel};
//# sourceMappingURL=index.es.js.map
