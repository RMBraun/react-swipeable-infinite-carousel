"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);var n="Carousel-module_container__j52CF",o="Carousel-module_slideContainer__q7xxg",a="Carousel-module_arrowIcon__wMmqr",s="Carousel-module_leftArrowIcon__daMSf",l="Carousel-module_rightArrowIcon__dMi-3",u="Carousel-module_arrow__qfBj1",i="Carousel-module_isArrowHidden__9yP-w",c="Carousel-module_rightArrow__8sZy6",d="Carousel-module_leftArrow__yzgQL";!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".Carousel-module_container__j52CF{align-items:center;display:flex;flex-direction:row;max-width:100%;overflow:hidden;position:relative}.Carousel-module_slideContainer__q7xxg{display:flex;flex-direction:row;z-index:1}.Carousel-module_arrowIcon__wMmqr{background-color:transparent;border:6px solid #1b1b1b;border-radius:5px;height:35%;opacity:.5;transition:border-color .5s;width:35%}.Carousel-module_leftArrowIcon__daMSf{border-right:none;border-top:none;transform:translateX(2.5px) rotate(45deg)}.Carousel-module_rightArrowIcon__dMi-3{border-bottom:none;border-left:none;transform:translateX(-2.5px) rotate(45deg)}.Carousel-module_arrow__qfBj1{align-items:center;background:transparent;border:none;border-radius:50%;cursor:pointer;display:flex;flex-direction:column;height:48px;justify-content:center;margin:0;padding:0;position:absolute;transition:opacity .5s,background-color .5s;width:48px;z-index:2}.Carousel-module_isArrowHidden__9yP-w{opacity:0;pointer-events:none}.Carousel-module_arrow__qfBj1:hover{background-color:#efefefa9;opacity:1}.Carousel-module_arrow__qfBj1:active{background-color:#929292a9;opacity:1}.Carousel-module_rightArrow__8sZy6{right:10px}.Carousel-module_leftArrow__yzgQL{left:10px}");const f=e=>e?.touches?.[0]?.clientX||e?.clientX||0,m=(e,t)=>e?.length&&t&&t>0?e.reduce(((r,{start:n},o)=>{const a=e[Math.min(o+t-1,e.length-1)].end-n;return a>r?a:r}),0):0,h=({displayCount:e,minDisplayCount:t,slideAnchors:r})=>{const n=m(r,t),o=m(r,e);return{minWidth:n?`${n}px`:"auto",width:o?`${o}px`:"100%"}},_=({isLeft:e,isHidden:t,style:n,onClick:o})=>r.default.createElement("button",{className:`${u} ${e?d:c} ${t?i:""}`,style:n,onClick:o},r.default.createElement("span",{className:`${a} ${e?s:l}`}));exports.Carousel=({startIndex:t=0,minDisplayCount:a=0,displayCount:s=0,gridGap:l=10,showArrows:u=!0,renderArrows:i=_,style:c={},slideContainerStyle:d={},slideStyle:m={},children:p})=>{const C=e.useRef(),g=r.default.Children.toArray(p)||[],y=g.length,w=e.useMemo((()=>Array(y).fill(null).map(((e,t)=>w?.[t]||r.default.createRef()))),[y]),[b,x]=e.useState([]),v=e.useRef(null),M=e.useRef(null),k=e.useCallback(((e,t=b)=>{const r=t?.[e]?.start;return null!=r?-1*r:0}),[b]),A=e.useRef(t),[E,S]=e.useState(t),R=e.useCallback((e=>{S(e),A.current=e}),[S]),[q,j]=e.useState(y),[L,T]=e.useState(!1),[$,I]=e.useState(!1),z=e.useRef(k(E)),D=e.useRef(0),B=e.useRef(0),N=e.useRef(),X=e.useMemo((()=>{const e=b?.[q]?.start;return null!=e?-1*e:0}),[b,y,q]),H=0!==E,P=null==z.current||null==v.current||null==b?.[y-1]||-1*z.current+v.current.clientWidth<b?.[y-1].end,W=e.useCallback(((e,t=q)=>Math.max(0,Math.min(t,e))),[q]),F=e.useCallback((e=>{z.current=e,requestAnimationFrame((()=>{M.current&&(M.current.style.transform=`translate(${e}px)`)}))}),[]),G=()=>{const e=((e=[],t=0)=>e.reduce(((e,r,n)=>{if(r?.current){const o=r.current.clientWidth,a=0===n?0:e[n-1].end+t,s=a+o;e.push({start:a,end:s,width:o})}return e}),[]))(w,l),t=v.current.clientWidth,r=e[e.length-1].end,n=W(e.findIndex((({start:e})=>e+t>=r)),e.length-1),o=W(A.current,n),a=k(o,e);R(o),x(e),j(n),F(a)},O=e.useCallback((e=>{const t=W(e);return{index:t,translateOffset:k(t)}}),[y,k,W]);e.useLayoutEffect((()=>{C.current&&C.current.disconnect(),C.current=new ResizeObserver(G),w.forEach((({current:e})=>C.current.observe(e))),G()}),[y,a,s,l]),e.useEffect((()=>(window.addEventListener("resize",G),()=>{C.current&&C.current.disconnect(),window.removeEventListener("resize",G)})),[]);const Q=e.useCallback((e=>t=>{t.preventDefault(),t.stopPropagation();const r=W(E+e);R(r),F(k(r))}),[E,y,k,R,F,W]),Y=e.useCallback((e=>{if($||e.touches?.length>1)return;T(!0);const t=f(e);D.current=t,B.current=t}),[$,T]),Z=e.useCallback((e=>{if(e.stopPropagation(),!L||$)return;B.current=f(e);const t=D.current-B.current;D.current=B.current,0!==t&&F(z.current-t)}),[$,L,E,F]),U=e.useCallback((e=>{if($||e.touches?.length>0)return;const t=-1*z.current,r=b.reduce(((e,{start:r,width:n},o)=>t>=r?t>=r+n/2?o+1:o:e),0),n=W(r);R(n),F(k(n)),D.current=0,B.current=0,T(!1)}),[$,b,F,k,R,W,T]),J=e.useCallback((e=>{if(L)return;const t=0===e.deltaX&&Math.abs(e.deltaY)>0,r=t?-1*e.deltaY:e.deltaX,n=Math.sign(r);if(z.current>=0&&-1===n||z.current<=X&&1===n)return;$||t||I(!0);const o=z.current-n*Math.min(75,Math.abs(r)),a=()=>{I(!1);const e=-1*o,t=b.reduce(((t,{start:r,width:n},o)=>e>=r?e>=r+n/2?o+1:o:t),0),r=W(t);R(r),F(k(r))};N.current&&clearTimeout(N.current),o>=0?(F(0),a()):o<=X?(F(X),a()):(F(o),N.current=setTimeout(a,100))}),[b,l,$,X,z,L,I,R,F,O]),K=e.useMemo((()=>(({gridGap:e,isScrolling:t,isDragging:r})=>({gap:`${e}px`,transition:"transform "+(t||r?"0ms":"500ms")}))({gridGap:l,isScrolling:$,isDragging:L})),[l,$,L]);return r.default.createElement("div",{className:n,style:{...h({minDisplayCount:a,displayCount:s,slideAnchors:b}),...c},ref:v},u&&r.default.createElement(i,{isLeft:!0,isRight:!1,isHidden:$||L||!H,onClick:H?Q(-1):void 0}),r.default.createElement("div",{ref:M,className:o,style:{...K,...d},onTouchStart:Y,onTouchMove:Z,onTouchEnd:U,onTouchCancel:U,onMouseDown:Y,onMouseMove:Z,onMouseUp:U,onMouseLeave:U,onWheel:J},g.map(((e,t)=>r.default.createElement("div",{style:m,ref:w[t],key:t},e)))),u&&r.default.createElement(i,{isLeft:!1,isRight:!0,isHidden:$||L||!P,onClick:P?Q(1):void 0}))};
//# sourceMappingURL=index.js.map
