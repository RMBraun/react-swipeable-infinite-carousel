"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=r(e);var n="Carousel-module_container__j52CF",o="Carousel-module_slideContainer__q7xxg",a="Carousel-module_arrowIcon__wMmqr",s="Carousel-module_leftArrowIcon__daMSf",l="Carousel-module_rightArrowIcon__dMi-3",u="Carousel-module_arrow__qfBj1",i="Carousel-module_isArrowHidden__9yP-w",c="Carousel-module_rightArrow__8sZy6",d="Carousel-module_leftArrow__yzgQL";!function(e,r){void 0===r&&(r={});var t=r.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===t&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".Carousel-module_container__j52CF{align-items:center;display:flex;flex-direction:row;max-width:100%;overflow:hidden;position:relative}.Carousel-module_slideContainer__q7xxg{display:flex;flex-direction:row;z-index:1}.Carousel-module_arrowIcon__wMmqr{background-color:transparent;border:6px solid #1b1b1b;border-radius:5px;height:35%;opacity:.5;transition:border-color .5s;width:35%}.Carousel-module_leftArrowIcon__daMSf{border-right:none;border-top:none;transform:translateX(2.5px) rotate(45deg)}.Carousel-module_rightArrowIcon__dMi-3{border-bottom:none;border-left:none;transform:translateX(-2.5px) rotate(45deg)}.Carousel-module_arrow__qfBj1{align-items:center;background:transparent;border:none;border-radius:50%;cursor:pointer;display:flex;flex-direction:column;height:48px;justify-content:center;margin:0;padding:0;position:absolute;transition:opacity .5s,background-color .5s;width:48px;z-index:2}.Carousel-module_isArrowHidden__9yP-w{opacity:0;pointer-events:none}.Carousel-module_arrow__qfBj1:hover{background-color:#efefefa9;opacity:1}.Carousel-module_arrow__qfBj1:active{background-color:#929292a9;opacity:1}.Carousel-module_rightArrow__8sZy6{right:10px}.Carousel-module_leftArrow__yzgQL{left:10px}");const f=e=>e?.touches?.[0]?.clientX||e?.clientX||0,m=(e,r)=>e?.length&&r&&r>0?e.reduce(((t,{start:n},o)=>{const a=e[Math.min(o+r-1,e.length-1)].end-n;return a>t?a:t}),0):0,h=({displayCount:e,minDisplayCount:r,slideAnchors:t})=>{const n=m(t,r),o=m(t,e);return{minWidth:n?`${n}px`:"auto",width:o?`${o}px`:"100%"}},_=({isLeft:r,isHidden:n,scrollBy:o})=>{const f=e.useCallback((e=>r=>{r.preventDefault(),r.stopPropagation(),o(e)}));return t.default.createElement("button",{className:`${u} ${r?d:c} ${n?i:""}`,onClick:f(r?-1:1)},t.default.createElement("span",{className:`${a} ${r?s:l}`}))};exports.Carousel=({startIndex:r=0,minDisplayCount:a=0,displayCount:s=0,gridGap:l=10,showArrows:u=!0,renderArrows:i=_,scrollSpeed:c=75,style:d={},slideContainerStyle:m={},slideStyle:p={},children:C})=>{const g=e.useRef(),y=t.default.Children.toArray(C)||[],w=y.length,b=e.useMemo((()=>Array(w).fill(null).map(((e,r)=>b?.[r]||t.default.createRef()))),[w]),[x,v]=e.useState([]),M=e.useRef(null),k=e.useRef(null),A=e.useCallback(((e,r=x)=>{const t=r?.[e]?.start;return null!=t?-1*t:0}),[x]),E=e.useRef(r),[S,R]=e.useState(r),q=e.useCallback((e=>{R(e),E.current=e}),[R]),[j,B]=e.useState(w),[L,T]=e.useState(!1),[$,I]=e.useState(!1),z=e.useRef(A(S)),D=e.useRef(0),N=e.useRef(0),X=e.useRef(),H=e.useMemo((()=>{const e=x?.[j]?.start;return null!=e?-1*e:0}),[x,w,j]),P=0!==S,W=null==z.current||null==M.current||null==x?.[w-1]||-1*z.current+M.current.clientWidth<x?.[w-1].end,F=e.useCallback(((e,r=j)=>Math.max(0,Math.min(r,e))),[j]),G=e.useCallback((e=>{z.current=e,requestAnimationFrame((()=>{k.current&&(k.current.style.transform=`translate(${e}px)`)}))}),[]),O=()=>{const e=((e=[],r=0)=>e.reduce(((e,t,n)=>{if(t?.current){const o=t.current.clientWidth,a=0===n?0:e[n-1].end+r,s=a+o;e.push({start:a,end:s,width:o})}return e}),[]))(b,l),r=M.current.clientWidth,t=e[e.length-1].end,n=F(e.findIndex((({start:e})=>e+r>=t)),e.length-1),o=F(E.current,n),a=A(o,e);q(o),v(e),B(n),G(a)},Q=e.useCallback((e=>{const r=F(e);return{index:r,translateOffset:A(r)}}),[w,A,F]);e.useLayoutEffect((()=>{g.current&&g.current.disconnect(),g.current=new ResizeObserver(O),b.forEach((({current:e})=>g.current.observe(e))),O()}),[w,a,s,l]),e.useEffect((()=>(window.addEventListener("resize",O),()=>{g.current&&g.current.disconnect(),window.removeEventListener("resize",O)})),[]);const Y=e.useCallback((e=>{const r=F(S+e);q(r),G(A(r))}),[S,w,A,q,G,F]),Z=e.useCallback((e=>{if($||e.touches?.length>1)return;T(!0);const r=f(e);D.current=r,N.current=r}),[$,T]),U=e.useCallback((e=>{if(e.stopPropagation(),!L||$)return;N.current=f(e);const r=D.current-N.current;D.current=N.current,0!==r&&G(z.current-r)}),[$,L,S,G]),J=e.useCallback((e=>{if($||e.touches?.length>0)return;const r=-1*z.current,t=x.reduce(((e,{start:t,width:n},o)=>r>=t?r>=t+n/2?o+1:o:e),0),n=F(t);q(n),G(A(n)),D.current=0,N.current=0,T(!1)}),[$,x,G,A,q,F,T]),K=e.useCallback((e=>{if(L)return;const r=0===e.deltaX&&Math.abs(e.deltaY)>0,t=r?-1*e.deltaY:e.deltaX,n=Math.sign(t);if(z.current>=0&&-1===n||z.current<=H&&1===n)return;$||r||I(!0);const o=z.current-n*Math.min(c,Math.abs(t)),a=()=>{I(!1);const e=-1*o,r=x.reduce(((r,{start:t,width:n},o)=>e>=t?e>=t+n/2?o+1:o:r),0),t=F(r);q(t),G(A(t))};X.current&&clearTimeout(X.current),o>=0?(G(0),a()):o<=H?(G(H),a()):(G(o),X.current=setTimeout(a,100))}),[x,c,l,$,H,z,L,I,q,G,Q]),V=e.useMemo((()=>(({gridGap:e,isScrolling:r,isDragging:t})=>({gap:`${e}px`,transition:"transform "+(r||t?"0ms":"500ms")}))({gridGap:l,isScrolling:$,isDragging:L})),[l,$,L]);return t.default.createElement("div",{className:n,style:{...h({minDisplayCount:a,displayCount:s,slideAnchors:x}),...d},ref:M},u&&t.default.createElement(i,{isLeft:!0,isRight:!1,isHidden:$||L||!P,scrollBy:Y}),t.default.createElement("div",{ref:k,className:o,style:{...V,...m},onTouchStart:Z,onTouchMove:U,onTouchEnd:J,onTouchCancel:J,onMouseDown:Z,onMouseMove:U,onMouseUp:J,onMouseLeave:J,onWheel:K},y.map(((e,r)=>t.default.createElement("div",{style:p,ref:b[r],key:r},e)))),u&&t.default.createElement(i,{isLeft:!1,isRight:!0,isHidden:$||L||!W,scrollBy:Y}))};
//# sourceMappingURL=index.js.map
